{% extends "base.html" %}

{% block title %}Analisador de Relatórios IA{% endblock %}

{% block content %}
    <div class="container-fluid mt-4">
        <h1>Analisador de Relatórios com IA</h1>
        <p class="lead">Cole o relatório bruto abaixo para processamento e correção pela Inteligência Artificial.</p>

        {% if current_user.is_authenticated %}
            <div class="card">
                <div class="card-header">
                    Entrada do Relatório
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="relatorioBruto">Relatório Bruto:</label>
                        <textarea class="form-control" id="relatorioBruto" name="relatorioBruto" rows="15" placeholder="Cole o relatório bruto aqui..."></textarea>
                        <small id="charCount" class="form-text text-muted">Caracteres: 0 / 12000</small>
                    </div>
                    <button type="button" class="btn btn-primary mt-3" id="processarRelatorio">
                        <span id="processarSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"></span>
                        Processar Relatório
                    </button>
                    <button type="button" class="btn btn-secondary mt-3 ms-2" id="limparCampos">Limpar Tudo</button>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    Relatório Processado
                </div>
                <div class="card-body">
                    <div id="statusProcessamento" class="mb-2"></div>
                    <div class="form-group">
                        <label for="resultadoProcessamento">Resultado:</label>
                        <textarea class="form-control" id="resultadoProcessamento" rows="20" readonly placeholder="O relatório processado aparecerá aqui..."></textarea>
                    </div>
                    <button type="button" class="btn btn-info mt-3" id="copiarResultado" data-bs-toggle="tooltip" data-bs-placement="top" title="Copiar para a área de transferência">
                        Copiar Resultado
                    </button>
                </div>
            </div>
        {% else %}
            <div class="alert alert-warning" role="alert">
                Por favor, <a href="{{ url_for('main.login') }}" class="alert-link">faça login</a> ou <a href="{{ url_for('main.register') }}" class="alert-link">registre-se</a> para utilizar o analisador de relatórios.
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block head_links %}
    {# Adicione aqui links para CSS específicos da página, se necessário, ou Bootstrap se estiver usando via CDN #}
    {# Exemplo se você estiver usando Bootstrap 5 para os cards e botões:
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    #}
{% endblock %}